# 4. 분포 시각화 심화: 박스 플롯과 바이올린 플롯

## 목차
- [4. 분포 시각화 심화: 박스 플롯과 바이올린 플롯](#4-분포-시각화-심화-박스-플롯과-바이올린-플롯)
  - [목차](#목차)
  - [박스 플롯 (Box Plot) 해부하기](#박스-플롯-box-plot-해부하기)
    - [박스 플롯으로 무엇을 알 수 있는가?](#박스-플롯으로-무엇을-알-수-있는가)
  - [바이올린 플롯 (Violin Plot): 분포의 모양까지](#바이올린-플롯-violin-plot-분포의-모양까지)
  - [박스 플롯 vs. 바이올린 플롯: 언제 무엇을 쓸까?](#박스-플롯-vs-바이올린-플롯-언제-무엇을-쓸까)

---

## 박스 플롯 (Box Plot) 해부하기

**박스 플롯**은 데이터의 분포를 5가지 핵심 요약 수치를 사용하여 시각화하는 강력한 도구입니다. 데이터의 중심 경향, 퍼진 정도, 그리고 이상치를 한눈에 파악할 수 있습니다.

```mermaid
graph TD
    subgraph "박스 플롯 구성 요소"
        direction LR
        A[이상치<br>(Outlier)] -- "Q3 + 1.5*IQR 초과" --- B(최댓값<br>Upper Whisker)
        B --- C{상자<br>Box}
        C --- D(최솟값<br>Lower Whisker)
        D --- E[이상치<br>(Outlier)]
        
        subgraph "상자 내부"
            C1[3사분위수<br>(Q3)]
            C2[중앙값<br>(Median, Q2)]
            C3[1사분위수<br>(Q1)]
        end
        C1 -- "IQR" -- C3
    end
```

- **중앙값 (Median)** : 데이터의 정중앙에 위치하는 값. 평균(mean)보다 이상치에 덜 민감합니다.
- **1사분위수 (Q1)** : 데이터를 오름차순으로 정렬했을 때, 하위 25%에 해당하는 값.
- **3사분위수 (Q3)** : 하위 75%에 해당하는 값.
- **IQR (Interquartile Range)** : `Q3 - Q1`. 데이터의 중간 50%가 모여있는 범위로, 데이터의 퍼진 정도를 나타냅니다.
- **수염 (Whisker)** : 상자 바깥의 선. 일반적으로 `Q1 - 1.5 * IQR` 와 `Q3 + 1.5 * IQR` 범위 내의 최솟값과 최댓값을 나타냅니다.
- **이상치 (Outlier)** : 수염의 범위를 벗어나는 값들.

### 박스 플롯으로 무엇을 알 수 있는가?

- **데이터의 대칭성**: 중앙값이 상자의 중앙에 가까울수록 데이터 분포가 대칭적입니다.
- **데이터의 퍼진 정도**: 상자(IQR)나 수염의 길이가 길수록 데이터가 넓게 퍼져있음을 의미합니다.
- **이상치의 존재**: 수염 바깥에 점으로 표시되는 이상치의 존재 여부와 그 값을 직접 확인할 수 있습니다.

---

## 바이올린 플롯 (Violin Plot): 분포의 모양까지

**바이올린 플롯**은 박스 플롯이 제공하는 핵심 통계 정보에, **커널 밀도 추정(KDE)** 을 통한 데이터의 분포 형태를 함께 보여주는, 한 단계 더 발전된 시각화 기법입니다.

- **장점**: 박스 플롯만으로는 알 수 없는 데이터 분포의 구체적인 모양(예: 봉우리가 하나인지, 두 개인지)을 파악할 수 있습니다.
- **구성**: 바이올린 모양의 외곽선이 데이터의 분포 밀도를 나타내며, 내부에는 보통 박스 플롯이나 중앙값, 사분위수 범위 등이 함께 표시됩니다.

```python
import seaborn as sns
import matplotlib.pyplot as plt
import numpy as np

# 예시 데이터: 두 개의 봉우리를 가진 분포
data = np.concatenate([
    np.random.normal(0, 1, 200),
    np.random.normal(6, 1, 200)
])

fig, axes = plt.subplots(1, 2, figsize=(12, 5))

# 박스 플롯은 분포의 쌍봉형 특징을 숨긴다.
sns.boxplot(y=data, ax=axes[0])
axes[0].set_title('박스 플롯')

# 바이올린 플롯은 쌍봉형 분포를 명확히 보여준다.
sns.violinplot(y=data, ax=axes[1])
axes[1].set_title('바이올린 플롯')

plt.show()
```

---

## 박스 플롯 vs. 바이올린 플롯: 언제 무엇을 쓸까?

| 구분 | 박스 플롯 (Box Plot) | 바이올린 플롯 (Violin Plot) |
|---|---|---|
| **초점** | **요약 통계량**, **이상치 탐지** | **분포의 전체적인 형태** |
| **정보량** | 상대적으로 적음 (5가지 숫자 요약) | 많음 (분포 밀도 + 통계량) |
| **장점** | 깔끔하고 직관적. 여러 그룹 비교에 용이. | 다봉형(multimodal) 분포 등 복잡한 분포 형태 파악 가능. |
| **단점** | 데이터 분포의 구체적인 모양을 숨김. | 해석이 박스 플롯보다 복잡할 수 있음. 표본 크기가 작으면 분포 추정이 부정확할 수 있음. |
| **추천 상황** | 데이터의 중앙값, 사분위수, 이상치를 명확히 비교하고 싶을 때. | 데이터 분포의 대칭성, 봉우리의 개수 등 구체적인 형태를 함께 보고 싶을 때. |

> **실용 팁**: `seaborn`의 바이올린 플롯에서 `inner="box"` 옵션을 사용하면, 바이올린 플롯 내부에 미니 박스 플롯을 함께 그려 두 차트의 장점을 모두 취할 수 있습니다.