# 2. 수량 데이터 시각화: 막대, 점, 그리고 히트맵

## 목차
- [2. 수량 데이터 시각화: 막대, 점, 그리고 히트맵](#2-수량-데이터-시각화-막대-점-그리고-히트맵)
  - [목차](#목차)
  - [막대그래프 (Bar Plot): 비교의 기본](#막대그래프-bar-plot-비교의-기본)
  - [점도표 (Dot Plot): 정확한 비교를 위하여](#점도표-dot-plot-정확한-비교를-위하여)
  - [Seaborn: 더 아름답고 쉬운 시각화](#seaborn-더-아름답고-쉬운-시각화)
  - [히트맵 (Heatmap): 2차원 데이터의 패턴을 한눈에](#히트맵-heatmap-2차원-데이터의-패턴을-한눈에)
    - [히트맵을 위한 데이터 준비: 피벗 테이블](#히트맵을-위한-데이터-준비-피벗-테이블)

---

## 막대그래프 (Bar Plot): 비교의 기본

**막대그래프**는 여러 **범주형 항목**에 대한 **수량 값**을 직사각형 막대의 길이로 표현하여, 각 항목의 크기를 시각적으로 비교하는 가장 기본적이고 효과적인 차트입니다.

- **언제 사용하는가?**: 여러 그룹 간의 판매량, 점수, 빈도 등 양적인 차이를 비교할 때.
- **종류**:
    - **단일 막대그래프**: 하나의 변수에 대한 값을 비교.
    - **그룹형 막대그래프**: 두 개의 범주형 변수에 대한 값을 함께 비교.
    - **누적 막대그래프**: 전체에 대한 각 부분의 크기를 함께 보여줌.
- **중요 원칙**: 값의 크기를 막대의 '길이'로 인식하므로, **Y축은 반드시 0에서 시작**하여 데이터 왜곡을 방지해야 합니다.

```python
import matplotlib.pyplot as plt

plt.rc('font', family='Malgun Gothic') # 한글 폰트 설정

categories = ['A팀', 'B팀', 'C팀', 'D팀']
scores = [85, 92, 78, 88]

plt.bar(categories, scores, color='royalblue')
plt.title('팀별 성과 점수')
plt.ylabel('점수')
plt.ylim(0, 100) # Y축 범위를 0부터 설정
plt.show()
```

---

## 점도표 (Dot Plot): 정확한 비교를 위하여

**점도표**는 막대그래프의 '막대' 대신 '점'을 사용하여 수량을 표현하는 차트입니다.

- **장점**:
    - 불필요한 잉크(막대)를 제거하여 **데이터-잉크 비율**을 높입니다.
    - Y축을 0에서 시작할 필요가 없어, **값들이 서로 비슷할 때 그 차이를 더 명확하게 비교**할 수 있습니다.
- **단점**: 데이터 포인트가 너무 많아지면 점들이 겹쳐 알아보기 어려울 수 있습니다.

```python
# 값들이 비슷한 경우, 막대그래프는 차이를 보기 어렵다.
plt.bar(categories, [91, 92, 90, 93])
plt.title('막대그래프: 차이가 잘 보이지 않음')
plt.ylim(0, 100)
plt.show()

# 점도표는 Y축 범위를 조정하여 차이를 명확히 보여준다.
plt.scatter([91, 92, 90, 93], categories)
plt.title('점도표: 미세한 차이를 명확하게 비교')
plt.xlim(89, 94) # Y축 대신 X축 범위를 조정 (가로 점도표)
plt.grid(axis='x')
plt.show()
```

---

## Seaborn: 더 아름답고 쉬운 시각화

**Seaborn**은 Matplotlib을 기반으로, 더 **아름답고 통계적으로 의미 있는** 그래프를 더 **적은 코드**로 그릴 수 있게 해주는 고수준 시각화 라이브러리입니다. 특히 Pandas DataFrame과 매우 잘 연동됩니다.

```python
import seaborn as sns
import pandas as pd

# Seaborn은 Pandas DataFrame을 데이터로 직접 받을 수 있다.
df = pd.DataFrame({
    '팀': ['A팀', 'B팀', 'C팀', 'D팀'],
    '점수': [85, 92, 78, 88]
})

sns.barplot(x='팀', y='점수', data=df, palette='viridis')
plt.title('Seaborn으로 그린 막대그래프')
plt.show()
```

---

## 히트맵 (Heatmap): 2차원 데이터의 패턴을 한눈에

**히트맵**은 2차원 테이블 형태의 데이터에서, 각 셀의 숫자 값을 **색상의 농도**로 표현하는 시각화 기법입니다. 전체 데이터의 **패턴, 관계, 그리고 핫스팟(값이 높은 부분)과 콜드스팟(값이 낮은 부분)** 을 한눈에 파악하는 데 매우 효과적입니다.

- **언제 사용하는가?**: 두 개의 범주형 변수에 따른 수량 값의 분포를 볼 때. (예: 요일별/시간대별 방문자 수, 상품 카테고리별/지역별 판매량)

### 히트맵을 위한 데이터 준비: 피벗 테이블

히트맵을 그리려면, 데이터가 행과 열에 각각 범주형 변수가 오고, 각 셀에 수량 값이 있는 **피벗 테이블(Pivot Table)**  또는 **교차표(Crosstab)**  형태로 가공되어야 합니다. Pandas의 `pivot_table()` 메서드를 사용하면 쉽게 만들 수 있습니다.

```python
# 원본 데이터 (Long format)
#   요일  시간대  방문자수
# 0   월   오전      30
# 1   월   오후      50
# ...

# 1. 피벗 테이블로 데이터 형태 변환
pivot_df = df.pivot_table(index='요일', columns='시간대', values='방문자수')

# 2. Seaborn의 heatmap 함수로 시각화
plt.figure(figsize=(10, 6))
sns.heatmap(pivot_df, annot=True, fmt='d', cmap='YlGnBu')
# annot=True: 각 셀에 숫자 값을 표시
# fmt='d': 숫자를 정수 형태로 표시
# cmap='YlGnBu': 사용할 색상 맵 지정

plt.title('요일 및 시간대별 방문자 수 히트맵')
plt.show()
```