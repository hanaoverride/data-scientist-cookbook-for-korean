# 2. ë‹¤ìˆ˜ í…Œì´ë¸” ì œì–´í•˜ê¸° ğŸ”„

## ëª©ì°¨
- [2. ë‹¤ìˆ˜ í…Œì´ë¸” ì œì–´í•˜ê¸° ğŸ”„](#2-ë‹¤ìˆ˜-í…Œì´ë¸”-ì œì–´í•˜ê¸°-)
  - [ëª©ì°¨](#ëª©ì°¨)
  - [GROUP BY: ë°ì´í„° ê·¸ë£¹ì§“ê¸° ğŸ“Š](#group-by-ë°ì´í„°-ê·¸ë£¹ì§“ê¸°-)
  - [HAVING ì ˆ: ê·¸ë£¹ ì¡°ê±´ í•„í„°ë§ ğŸ”](#having-ì ˆ-ê·¸ë£¹-ì¡°ê±´-í•„í„°ë§-)
  - [INNER JOIN: ê³µí†µëœ ë°ì´í„°ë¡œ í•©ì¹˜ê¸° ğŸ”—](#inner-join-ê³µí†µëœ-ë°ì´í„°ë¡œ-í•©ì¹˜ê¸°-)
  - [JOIN ì ˆì— ì¡°ê±´ ì¶”ê°€í•˜ê¸° â•](#join-ì ˆì—-ì¡°ê±´-ì¶”ê°€í•˜ê¸°-)
  - [LEFT JOIN: ì™¼ìª½ í…Œì´ë¸”ì— ì˜¤ë¥¸ìª½ í…Œì´ë¸” ì´ì–´ë¶™ì´ê¸° â¬…ï¸](#left-join-ì™¼ìª½-í…Œì´ë¸”ì—-ì˜¤ë¥¸ìª½-í…Œì´ë¸”-ì´ì–´ë¶™ì´ê¸°-ï¸)

---

## GROUP BY: ë°ì´í„° ê·¸ë£¹ì§“ê¸° ğŸ“Š

**GROUP BY**ëŠ” í•œ ê°œ ì´ìƒì˜ íŠ¹ì • ì»¬ëŸ¼ì˜ **ê°™ì€ ê°’ì„ ê°€ì§„ ë°ì´í„°ë“¤**ì„ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¬¶ì–´ í†µê³„ì¹˜ë¥¼ ë‚¼ ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `loans` í…Œì´ë¸”ì—ì„œ ê° íšŒì›ë³„ë¡œ ì±…ì„ ëª‡ ê¶Œ ë¹Œë ¸ëŠ”ì§€ ì•Œê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•œë‹¤:

```sql
SELECT member_id, COUNT(*)
FROM loans
GROUP BY member_id;
```

ì´ì™¸ì—ë„ ë‹¤ì–‘í•œ **ì§‘ê³„ í•¨ìˆ˜**ë“¤ê³¼ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤:

```sql
SELECT member_id, 
       SUM(amount) AS total_spent,
       AVG(duration) AS avg_days,
       MAX(duration) AS max_days,
       MIN(duration) AS min_days
FROM loans
GROUP BY member_id;
```

> ğŸ’¡ **ì‹¤ë¬´ íŒ**: ì—¬ëŸ¬ ì»¬ëŸ¼ìœ¼ë¡œ ê·¸ë£¹í™”ë„ ê°€ëŠ¥í•˜ë‹¤. `GROUP BY ì»¬ëŸ¼1, ì»¬ëŸ¼2`ì²˜ëŸ¼ ì½¤ë§ˆë¡œ êµ¬ë¶„í•˜ë©´ ëœë‹¤.

> ğŸ“Š **GROUP BY ë‹¤ì´ì–´ê·¸ë¨**:
> ```mermaid
> flowchart LR
>     ì›ë³¸ë°ì´í„°[(Raw Data)] --> ê·¸ë£¹í™”[GROUP BY] --> ê·¸ë£¹ê²°ê³¼[(Grouped Results)]
>     style ê·¸ë£¹í™” fill:#f96,stroke:#333,stroke-width:2px
> ```

---

## HAVING ì ˆ: ê·¸ë£¹ ì¡°ê±´ í•„í„°ë§ ğŸ”

ê·¸ë£¹í™”í•œ ê²°ê³¼ ì¤‘ ì¡°ê±´ì— ë§ëŠ” ê·¸ë£¹ë§Œ í•„í„°ë§í•  ë•ŒëŠ” **HAVING** ì ˆì„ ì‚¬ìš©í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 2íšŒ ì´ìƒ ëŒ€ì¶œí•œ íšŒì›ë§Œ ë³´ê³  ì‹¶ì„ ê²½ìš°:

```sql
SELECT member_id, COUNT(*) AS cnt
FROM loans
GROUP BY member_id
HAVING COUNT(*) >= 2;
```

> âš ï¸ **ì£¼ì˜ì‚¬í•­**: `WHERE` ì ˆì€ ê·¸ë£¹í•‘ ì „ì— ê°œë³„ í–‰ì„ í•„í„°ë§í•˜ë©°, `HAVING`ì€ ê·¸ë£¹í•‘ í›„ í•„í„°ë§ì— ì‚¬ìš©ëœë‹¤.

```sql
-- WHEREì™€ HAVING í•¨ê»˜ ì‚¬ìš© ì˜ˆì œ
SELECT member_id, COUNT(*) AS cnt
FROM loans
WHERE loan_date >= '2023-01-01'  -- ê°œë³„ í–‰ í•„í„°ë§
GROUP BY member_id
HAVING COUNT(*) >= 2;  -- ê·¸ë£¹ í•„í„°ë§
```

---

## INNER JOIN: ê³µí†µëœ ë°ì´í„°ë¡œ í•©ì¹˜ê¸° ğŸ”—

**INNER JOIN**ì„ ì‚¬ìš©í•˜ë©´ ë‘ í…Œì´ë¸”ì—ì„œ ê³µí†µëœ ê°’(í‚¤)ì„ ê¸°ì¤€ìœ¼ë¡œ ë°ì´í„°ë¥¼ í•©ì¹  ìˆ˜ ìˆë‹¤.

ì˜ˆ: `loans` í…Œì´ë¸”ì˜ `member_id`ì™€ `members` í…Œì´ë¸”ì˜ `id`ê°€ ì¼ì¹˜í•˜ëŠ” ê²½ìš°

```sql
SELECT *
FROM loans
INNER JOIN members ON loans.member_id = members.id;
```

> ğŸ’¡ **ê¸°ë³¸ì ì¸ `INNER JOIN` ë¬¸ë²•**:
> ```sql
> SELECT ì»¬ëŸ¼ëª©ë¡
> FROM A
> INNER JOIN B ON A.í‚¤ = B.í‚¤;
> ```

> ğŸ” **ì‹¤ë¬´ íŒ**: ì¡°ì¸ í›„ ì›í•˜ëŠ” ì»¬ëŸ¼ë§Œ ì„ íƒí•˜ì—¬ ê²°ê³¼ë¥¼ ê¹”ë”í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
> ```sql
> SELECT loans.id, members.name, loans.book_title
> FROM loans
> INNER JOIN members ON loans.member_id = members.id;
> ```

---

## JOIN ì ˆì— ì¡°ê±´ ì¶”ê°€í•˜ê¸° â•

ì¡°ì¸ ê²°ê³¼ë¥¼ í•„í„°ë§í•˜ë ¤ë©´ `ON` ì ˆ ì™¸ì—ë„ `WHERE` ì ˆì„ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ íŠ¹ì • ê¸°ê°„ ë‚´ì˜ ëŒ€ì¶œ ì •ë³´ë§Œ ë³´ê³  ì‹¶ë‹¤ë©´:

```sql
SELECT *
FROM loans
INNER JOIN members ON loans.member_id = members.id
WHERE loans.date > '2024-01-01';
```

> âš ï¸ **ìˆœì„œì— ì£¼ì˜**: JOIN ì‹¤í–‰ í›„ WHERE ì¡°ê±´ì´ ì ìš©ëœë‹¤. ë³µì¡í•œ ì¡°ì¸ì—ì„œ ì¡°ê±´ ìœ„ì¹˜ì— ë”°ë¼ ê²°ê³¼ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤.

---

## LEFT JOIN: ì™¼ìª½ í…Œì´ë¸”ì— ì˜¤ë¥¸ìª½ í…Œì´ë¸” ì´ì–´ë¶™ì´ê¸° â¬…ï¸

**LEFT JOIN**ì€ ì™¼ìª½ í…Œì´ë¸”ì˜ ëª¨ë“  ë°ì´í„°ë¥¼ í¬í•¨í•˜ê³ , ì˜¤ë¥¸ìª½ í…Œì´ë¸”ì— ì¼ì¹˜í•˜ëŠ” ê°’ì´ ì—†ëŠ” ê²½ìš° `NULL`ë¡œ ì±„ìš´ë‹¤. ëŒ€ì¶œ ê¸°ë¡ì´ ì—†ëŠ” íšŒì›ë„ í¬í•¨í•˜ê³  ì‹¶ì„ ë•Œ ìœ ìš©í•˜ë‹¤.

```sql
SELECT *
FROM members
LEFT JOIN loans ON members.id = loans.member_id;
```

> ğŸ’¡ **ì‹¤ìš© ì˜ˆì œ**: í™œë™ì´ ì—†ëŠ” íœ´ë©´ íšŒì› ì°¾ê¸°
> ```sql
> SELECT members.*
> FROM members
> LEFT JOIN loans ON members.id = loans.member_id
> WHERE loans.id IS NULL;  -- ëŒ€ì¶œ ê¸°ë¡ì´ ì—†ëŠ” íšŒì›
> ```

-- ëŒ€ì¶œ ê¸°ë¡ì€ ëª¨ë‘ ë³´ì¡´í•˜ê³  íšŒì› ì •ë³´ëŠ” ìˆëŠ” ê²½ìš°ë§Œ í‘œì‹œ
```sql
SELECT *
FROM members
RIGHT JOIN loans ON members.id = loans.member_id;
```

> ğŸ’¡ **ë¹„êµ**:
> - `INNER JOIN`: ì–‘ìª½ í…Œì´ë¸”ì— ëª¨ë‘ ì¡´ì¬í•˜ëŠ” ë°ì´í„°ë§Œ ì¶œë ¥
> - `LEFT JOIN`: ì™¼ìª½ í…Œì´ë¸” ê¸°ì¤€ ì „ì²´ + ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ì˜¤ë¥¸ìª½ì€ `NULL`
> - `RIGHT JOIN`: ì˜¤ë¥¸ìª½ í…Œì´ë¸” ê¸°ì¤€ ì „ì²´ + ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ì™¼ìª½ì€ `NULL`

> âš ï¸ ì‹¤ë¬´ì—ì„œëŠ” ì½”ë“œ ì¼ê´€ì„±ì„ ìœ„í•´ `LEFT JOIN`ì„ ì£¼ë¡œ ì‚¬ìš©í•˜ê³ , `RIGHT JOIN`ì€ í…Œì´ë¸” ìˆœì„œë¥¼ ë°”ê¿” `LEFT JOIN`ìœ¼ë¡œ ì‘ì„±í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.

> ğŸ” **JOIN ì‹œê°í™”**:
>
> **ì˜ˆì œ í…Œì´ë¸”ë¡œ JOIN ì´í•´í•˜ê¸°:**
>
> ```
> íšŒì›(members)             ëŒ€ì¶œ(loans)
> +----+--------+         +----+----------+--------+
> | id | name   |         | id | member_id| book   |
> +----+--------+         +----+----------+--------+
> | 1  | ê¹€ì² ìˆ˜ |         | 101| 1        | íŒŒì´ì¬  |
> | 2  | ì´ì˜í¬ |         | 102| 1        | SQLê¸°ì´ˆ |
> | 3  | ë°•ì§€ë¯¼ |         | 103| 4        | ìë°”ìŠ¤í¬ë¦½íŠ¸|
> +----+--------+         +----+----------+--------+
> ```
> **í…Œì´ë¸” í˜•íƒœë¡œ ë³´ëŠ” JOIN ê²°ê³¼**:
>
> **INNER JOIN ê²°ê³¼:**
> ```
> +------+--------+--------+
> | id   | name   | book   |
> +------+--------+--------+
> | 1    | ê¹€ì² ìˆ˜ | íŒŒì´ì¬ |
> | 1    | ê¹€ì² ìˆ˜ | SQLê¸°ì´ˆ|
> +------+--------+--------+
> ```
> **LEFT JOIN ê²°ê³¼ (members LEFT JOIN loans):**
> ```
> +------+--------+--------+
> | id   | name   | book   |
> +------+--------+--------+
> | 1    | ê¹€ì² ìˆ˜ | íŒŒì´ì¬ |
> | 1    | ê¹€ì² ìˆ˜ | SQLê¸°ì´ˆ|
> | 2    | ì´ì˜í¬ | NULL   |
> | 3    | ë°•ì§€ë¯¼ | NULL   |
> +------+--------+--------+
> ```
> **RIGHT JOIN ê²°ê³¼ (members RIGHT JOIN loans):**
> ```
> +------+--------+-------------+
> | id   | name   | book        |
> +------+--------+-------------+
> | 1    | ê¹€ì² ìˆ˜ | íŒŒì´ì¬      |
> | 1    | ê¹€ì² ìˆ˜ | SQLê¸°ì´ˆ     |
> | NULL | NULL   | ìë°”ìŠ¤í¬ë¦½íŠ¸|
> +------+--------+-------------+
> ```
>âš ï¸ JOIN ì—°ì‚°ì„ í•©ì§‘í•©, ì°¨ì§‘í•©, êµì§‘í•© ë“±ìœ¼ë¡œ ì´í•´í•˜ë ¤ëŠ” ì‹œë„ê°€ ìˆìœ¼ë‚˜ ì§‘í•©ì˜ ê²½ìš°ëŠ” 1ì°¨ì› ì›ì†Œ ì—°ì‚°ì— ê°€ê¹ê³ , í…Œì´ë¸” ì¡°ì¸ì€ 2ì°¨ì› ì›ì†Œ ì—°ì‚°ì— ê°€ê¹ë‹¤. ì„ í˜•ëŒ€ìˆ˜í•™ì—ì„œ **í–‰ë ¬ ì—°ì‚°**ì„ ë°°ìš°ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•˜ë‹¤(í˜¹ì€ ë²¡í„°ì˜ **ì™¸ì ** ì—°ì‚°ì„ ìƒê°í•˜ë©´ ì‰¬ìš¸ ê²ƒì´ë‹¤).
> ì˜ˆë¥¼ ë“¤ì–´ INNER JOINì„ êµì§‘í•©ì´ë¼ê³  ì„¤ëª…í•  ê²½ìš° INNER JOINì˜ ê²°ê³¼ë¡œ í–‰ ìˆ˜ê°€ ëŠ˜ì–´ë‚  ìˆ˜ ìˆëŠ” ê²ƒì€ ì„¤ëª…í•˜ì§€ ëª»í•œë‹¤ **(ìˆ˜í•™ì ì¸ êµì§‘í•© ì—°ì‚°ì€ ë¬´ì¡°ê±´ í”¼ì—°ì‚° ì§‘í•© ì›ì†Œ ê°œìˆ˜ì˜ ì´í•˜ê°€ ë˜ë‹ˆê¹Œ!)** í•˜ì§€ë§Œ **í–‰ë ¬(ë²¡í„°)ê³± ì—°ì‚°**ê³¼ ìœ ì‚¬í•˜ë‹¤ê³  ìƒê°í•˜ë©´ í”¼ì—°ì‚° í…Œì´ë¸”ê°„ì˜ ëŒ€ì‘ê´€ê³„ë¡œ ìƒˆ í…Œì´ë¸”ì„ ìƒì„±í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë” ê¸´ìª½ì— ë§ì¶°ì§„ë‹¤ëŠ” ëŠë‚Œìœ¼ë¡œ ëŠ˜ì–´ë‚˜ëŠ” ê²ƒë„ ì„¤ëª…ì´ ê°€ëŠ¥í•˜ë‹¤. ì‹¤ì œë¡œëŠ” ë°ì¹´ë¥´íŠ¸ ê³±(ê³±ì§‘í•©)ì´ë¼ê³  ë¶€ë¥¸ë‹¤.
>**ë” ë³´ê¸°:** [ê³±ì§‘í•© ìœ„í‚¤ë°±ê³¼ ë¬¸ì„œ](https://ko.wikipedia.org/wiki/%EA%B3%B1%EC%A7%91%ED%95%A9)
---
