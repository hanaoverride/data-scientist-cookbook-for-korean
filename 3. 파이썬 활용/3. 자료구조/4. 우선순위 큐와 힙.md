# 4. ìš°ì„ ìˆœìœ„ íì™€ í™ ğŸŒ²

## ëª©ì°¨
- [4. ìš°ì„ ìˆœìœ„ íì™€ í™ ğŸŒ²](#4-ìš°ì„ ìˆœìœ„-íì™€-í™-)
  - [ëª©ì°¨](#ëª©ì°¨)
  - [ìš°ì„ ìˆœìœ„ íì™€ í™ êµ¬ì¡° ğŸ“Š](#ìš°ì„ ìˆœìœ„-íì™€-í™-êµ¬ì¡°-)
    - [ìš°ì„ ìˆœìœ„ íë€?](#ìš°ì„ ìˆœìœ„-íë€)
    - [ë°°ì—´ë¡œ ë‹¨ìˆœ êµ¬í˜„í•œ ê²½ìš°](#ë°°ì—´ë¡œ-ë‹¨ìˆœ-êµ¬í˜„í•œ-ê²½ìš°)
    - [í™(Heap) êµ¬ì¡°ë¥¼ ì‚¬ìš©í•´ êµ¬í˜„í•œ ê²½ìš°](#í™heap-êµ¬ì¡°ë¥¼-ì‚¬ìš©í•´-êµ¬í˜„í•œ-ê²½ìš°)
    - [í™ì˜ ì‹œê°„ ë³µì¡ë„](#í™ì˜-ì‹œê°„-ë³µì¡ë„)
  - [í™ì„ ì´ìš©í•œ ë¬¸ì œ í’€ì´ ğŸ’¡](#í™ì„-ì´ìš©í•œ-ë¬¸ì œ-í’€ì´-)
    - [ìµœì†Œ í™ êµ¬í˜„](#ìµœì†Œ-í™-êµ¬í˜„)
    - [ìµœëŒ€ í™ êµ¬í˜„](#ìµœëŒ€-í™-êµ¬í˜„)
    - [ì ˆëŒ“ê°’ í™](#ì ˆëŒ“ê°’-í™)
    - [í™ ì •ë ¬](#í™-ì •ë ¬)
    - [íƒë°° ë°•ìŠ¤ í•©ì¹˜ê¸° ğŸšš](#íƒë°°-ë°•ìŠ¤-í•©ì¹˜ê¸°-)
    - [ì¤‘ê°„ê°’ ì°¾ê¸° ğŸ¯](#ì¤‘ê°„ê°’-ì°¾ê¸°-)
      - [í•´ê²° ì „ëµ](#í•´ê²°-ì „ëµ)
  - [í™ì˜ í™œìš© ì‚¬ë¡€ ğŸ”](#í™ì˜-í™œìš©-ì‚¬ë¡€-)
    - [ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜](#ë‹¤ìµìŠ¤íŠ¸ë¼-ì•Œê³ ë¦¬ì¦˜)
    - [í—ˆí”„ë§Œ ì½”ë”©](#í—ˆí”„ë§Œ-ì½”ë”©)
  - [íŒŒì´ì¬ì˜ heapq ëª¨ë“ˆ í™œìš©í•˜ê¸° ğŸ](#íŒŒì´ì¬ì˜-heapq-ëª¨ë“ˆ-í™œìš©í•˜ê¸°-)
    - [ê¸°ë³¸ ì‚¬ìš©ë²•](#ê¸°ë³¸-ì‚¬ìš©ë²•)
    - [ì‘ìš©: Kë²ˆì§¸ í° ìš”ì†Œ ì°¾ê¸°](#ì‘ìš©-kë²ˆì§¸-í°-ìš”ì†Œ-ì°¾ê¸°)
  - [ìš”ì•½ ğŸ“](#ìš”ì•½-)

---

## ìš°ì„ ìˆœìœ„ íì™€ í™ êµ¬ì¡° ğŸ“Š

### ìš°ì„ ìˆœìœ„ íë€?

**ìš°ì„ ìˆœìœ„ í(Priority Queue)** ëŠ” ì¼ë°˜ íì™€ ë‹¬ë¦¬, **ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ìš”ì†Œë¥¼ ë¨¼ì € êº¼ë‚´ëŠ”** ìë£Œêµ¬ì¡°ë‹¤. ì¶œë ¥ ì‹œ ê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§„ ì›ì†Œê°€ ë¨¼ì € ë°˜í™˜ë˜ë©°, ì´ë¥¼ ìœ„í•´ ì¼ë°˜ì ì¸ íì™€ëŠ” ë‹¤ë¥¸ êµ¬ì¡°ê°€ í•„ìš”í•˜ë‹¤.

```mermaid
graph TD
    A[ìš°ì„ ìˆœìœ„ í] --> B[ì¼ë°˜ì ì¸ í: FIFO]
    A --> C[ìš°ì„ ìˆœìœ„ í: ìš°ì„ ìˆœìœ„ ê¸°ë°˜]
    C --> D[ìµœëŒ€ ìš°ì„ ìˆœìœ„ í]
    C --> E[ìµœì†Œ ìš°ì„ ìˆœìœ„ í]
    D --> F[ê°€ì¥ í° ê°’ ìš°ì„ ]
    E --> G[ê°€ì¥ ì‘ì€ ê°’ ìš°ì„ ]
```

### ë°°ì—´ë¡œ ë‹¨ìˆœ êµ¬í˜„í•œ ê²½ìš°

```python
data = [1, 5, 4, 3]
# ì¶œë ¥ ê³¼ì •: ê°€ì¥ í° ìˆ˜ë¶€í„° êº¼ëƒ„
output = sorted(data, reverse=True)  # [5, 4, 3, 1]
```

| ì—°ì‚° | ì‹œê°„ ë³µì¡ë„ | ì„¤ëª… |
|------|------------|------|
| ì…ë ¥ | O(1) | ë°°ì—´ ëì— ìš”ì†Œ ì¶”ê°€ |
| ì¶œë ¥ | O(n) | ì •ë ¬ì´ í•„ìš”í•˜ë¯€ë¡œ ë¹„íš¨ìœ¨ì  |

### í™(Heap) êµ¬ì¡°ë¥¼ ì‚¬ìš©í•´ êµ¬í˜„í•œ ê²½ìš°

**í™**ì€ **ì™„ì „ ì´ì§„ íŠ¸ë¦¬** í˜•íƒœë¡œ, ìµœëŒ€ê°’ ë˜ëŠ” ìµœì†Œê°’ì„ ë¹ ë¥´ê²Œ ì°¾ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.

- **ìµœì†Œ í™(Min Heap)**: ë¶€ëª¨ ë…¸ë“œê°€ í•­ìƒ ìì‹ë³´ë‹¤ ì‘ìŒ
- **ìµœëŒ€ í™(Max Heap)**: ë¶€ëª¨ ë…¸ë“œê°€ í•­ìƒ ìì‹ë³´ë‹¤ í¼

```mermaid
graph TD
    subgraph ìµœì†Œ_í™
    A1[1] --> B1[4]
    A1 --> C1[3]
    B1 --> D1[5]
    B1 --> E1[8]
    end
    
    subgraph ìµœëŒ€_í™
    A2[10] --> B2[8]
    A2 --> C2[9]
    B2 --> D2[5]
    B2 --> E2[3]
    end
```

íŒŒì´ì¬ `heapq`ëŠ” **ìµœì†Œ í™**ë§Œ ì§€ì›í•˜ë©°, ìµœëŒ€ í™ì€ ê°’ì„ ìŒìˆ˜ë¡œ ë°”ê¾¸ëŠ” ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.

```python
import heapq

heap = []
heapq.heappush(heap, 3)
heapq.heappush(heap, 1)
heapq.heappush(heap, 5)

print(heapq.heappop(heap))  # ì¶œë ¥: 1
```

### í™ì˜ ì‹œê°„ ë³µì¡ë„

| ì—°ì‚° | ì‹œê°„ ë³µì¡ë„ | ì„¤ëª… |
|------|------------|------|
| ì‚½ì… | O(log n) | ì™„ì „ ì´ì§„ íŠ¸ë¦¬ì˜ ê¹Šì´ë§Œí¼ ë¹„êµ í•„ìš” |
| ì‚­ì œ | O(log n) | ë£¨íŠ¸ ì œê±° í›„ ì¬ì •ë ¬ í•„ìš” |
| ì¡°íšŒ | O(1) | ìµœì†Œ/ìµœëŒ€ê°’ ë°”ë¡œ í™•ì¸ ê°€ëŠ¥ |

---

## í™ì„ ì´ìš©í•œ ë¬¸ì œ í’€ì´ ğŸ’¡

### ìµœì†Œ í™ êµ¬í˜„

ë°°ì—´ì„ ì´ìš©í•´ ì§ì ‘ **ìµœì†Œ í™**ì„ êµ¬í˜„í•˜ë©°, ìì‹-ë¶€ëª¨ ê´€ê³„ëŠ” ì¸ë±ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤.

```python
class MinHeap:
    def __init__(self):
        self.heap = [0]  # ì¸ë±ìŠ¤ 0ì€ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
        
    def push(self, val):
        self.heap.append(val)
        i = len(self.heap) - 1
        
        # ë¶€ëª¨ì™€ ë¹„êµí•˜ë©° ìœ„ë¡œ ì´ë™
        while i > 1 and self.heap[i] < self.heap[i//2]:
            self.heap[i], self.heap[i//2] = self.heap[i//2], self.heap[i]
            i = i // 2
    
    def pop(self):
        if len(self.heap) <= 1:
            return None
        
        min_val = self.heap[1]
        self.heap[1] = self.heap[-1]
        self.heap.pop()
        self._sift_down(1)
        
        return min_val
    
    def _sift_down(self, i):
        smallest = i
        left = 2 * i
        right = 2 * i + 1
        
        if left < len(self.heap) and self.heap[left] < self.heap[smallest]:
            smallest = left
            
        if right < len(self.heap) and self.heap[right] < self.heap[smallest]:
            smallest = right
            
        if smallest != i:
            self.heap[i], self.heap[smallest] = self.heap[smallest], self.heap[i]
            self._sift_down(smallest)
```

### ìµœëŒ€ í™ êµ¬í˜„

ìµœì†Œ í™ êµ¬ì¡°ë¥¼ í™œìš©í•˜ë˜, ëª¨ë“  ê°’ì„ **ìŒìˆ˜ë¡œ ì €ì¥**í•˜ì—¬ ìµœëŒ€ í™ì²˜ëŸ¼ ë™ì‘í•˜ë„ë¡ êµ¬í˜„í•œë‹¤.

```python
import heapq

class MaxHeap:
    def __init__(self):
        self.heap = []
        
    def push(self, val):
        # ê°’ì„ ìŒìˆ˜ë¡œ ì €ì¥
        heapq.heappush(self.heap, -val)
        
    def pop(self):
        if not self.heap:
            return None
        # ê°’ì„ ë‹¤ì‹œ ì–‘ìˆ˜ë¡œ ë³€í™˜
        return -heapq.heappop(self.heap)
```

### ì ˆëŒ“ê°’ í™

ìš°ì„ ìˆœìœ„ ê¸°ì¤€ì„ ë‹¨ìˆœí•œ ìˆ«ì í¬ê¸°ê°€ ì•„ë‹ˆë¼ **ì ˆëŒ“ê°’**ìœ¼ë¡œ ë³€ê²½í•œ í™. ê°’ì´ ê°™ìœ¼ë©´ ì›ë˜ ê°’ì˜ í¬ê¸°ë¡œ ë¹„êµ.

```python
import heapq

# ì ˆëŒ“ê°’ í™ ì˜ˆì‹œ
abs_heap = []
values = [1, -3, 2, -5, 4]

# (ì ˆëŒ“ê°’, ì›ë˜ê°’) ìŒìœ¼ë¡œ ì €ì¥
for val in values:
    heapq.heappush(abs_heap, (abs(val), val))

# ì ˆëŒ“ê°’ì´ ì‘ì€ ìˆœì„œëŒ€ë¡œ ì¶œë ¥
while abs_heap:
    _, original = heapq.heappop(abs_heap)
    print(original, end=" ")  # ì¶œë ¥: 1 2 -3 4 -5
```

### í™ ì •ë ¬

í™ì— ëª¨ë“  ë°ì´í„°ë¥¼ ë„£ê³  ë‹¤ì‹œ êº¼ë‚´ ì •ë ¬ëœ ë¦¬ìŠ¤íŠ¸ë¥¼ ì–»ëŠ”ë‹¤.

```python
import heapq

nums = [6, 1, 10, 3]
heap = []
for n in nums:
    heapq.heappush(heap, n)
result = [heapq.heappop(heap) for _ in range(len(heap))]  # ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬
```

- ì „ì²´ ì‹œê°„ ë³µì¡ë„: `O(n log n)`

### íƒë°° ë°•ìŠ¤ í•©ì¹˜ê¸° ğŸšš

ì—¬ëŸ¬ ê°œì˜ íƒë°° ë°•ìŠ¤ë¥¼ í•˜ë‚˜ë¡œ í•©ì¹˜ëŠ” ì‘ì—…ì„ í•œë‹¤.  
ë‘ ë°•ìŠ¤ë¥¼ í•©ì¹  ë•ŒëŠ” **ë‘ ë°•ìŠ¤ ë¬´ê²Œì˜ í•©ë§Œí¼ì˜ ë¹„ìš©**ì´ ë°œìƒí•œë‹¤.  
**ì „ì²´ ë¹„ìš©ì´ ìµœì†Œê°€ ë˜ë„ë¡** ëª¨ë“  ë°•ìŠ¤ë¥¼ í•˜ë‚˜ë¡œ í•©ì³ì•¼ í•œë‹¤.

ê°€ì¥ ê°€ë²¼ìš´ ë°•ìŠ¤ 2ê°œë¥¼ ê³„ì†í•´ì„œ ê³¨ë¼ í•©ì¹˜ë©´ ëœë‹¤.  
ì´ë•Œ í™ì„ ì‚¬ìš©í•˜ë©´ ë§¤ë²ˆ ìµœì†Œê°’ 2ê°œë¥¼ ë¹ ë¥´ê²Œ ì„ íƒí•  ìˆ˜ ìˆë‹¤.

```python
import heapq

# íƒë°° ë°•ìŠ¤ ë¬´ê²Œ ë¦¬ìŠ¤íŠ¸
boxes = [2, 5, 3, 7]
heapq.heapify(boxes)  # ë¦¬ìŠ¤íŠ¸ë¥¼ í™ìœ¼ë¡œ ë³€í™˜
result = 0

# í•©ì¹˜ëŠ” ê³¼ì •
while len(boxes) > 1:
    a = heapq.heappop(boxes)  # ê°€ì¥ ê°€ë²¼ìš´ ë°•ìŠ¤
    b = heapq.heappop(boxes)  # ë‘ ë²ˆì§¸ë¡œ ê°€ë²¼ìš´ ë°•ìŠ¤
    total = a + b
    result += total  # ë¹„ìš© ì¶”ê°€
    heapq.heappush(boxes, total)  # í•©ì¹œ ë°•ìŠ¤ë¥¼ ë‹¤ì‹œ í™ì— ì¶”ê°€

print(f"ìµœì†Œ ë¹„ìš©: {result}")  # ìµœì†Œ ë¹„ìš© ì¶œë ¥
```

### ì¤‘ê°„ê°’ ì°¾ê¸° ğŸ¯

ì…ë ¥ê°’ì´ ìˆœì°¨ì ìœ¼ë¡œ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ í˜„ì¬ê¹Œì§€ì˜ **ì¤‘ê°„ê°’**ì„ ì¦‰ì‹œ ì¶œë ¥í•´ì•¼ í•˜ëŠ” ë¬¸ì œ.

#### í•´ê²° ì „ëµ
- **ìµœëŒ€ í™**: ì¤‘ê°„ê°’ ì´í•˜ì˜ ê°’ ì €ì¥
- **ìµœì†Œ í™**: ì¤‘ê°„ê°’ ì´ˆê³¼ì˜ ê°’ ì €ì¥
- ìµœëŒ€ í™ì˜ ë£¨íŠ¸ ë…¸ë“œê°€ ì¤‘ê°„ê°’ì´ ë¨

```mermaid
graph TD
    subgraph ì…ë ¥ê°’[1, 5, 2, 10, -1]
    end
    
    subgraph ì²˜ë¦¬ê³¼ì •
    A[ìµœëŒ€ í™] --- C{ì¤‘ê°„ê°’}
    C --- B[ìµœì†Œ í™]
    A --> |ì›ì†Œ < ì¤‘ê°„ê°’|D[-1, 1]
    B --> |ì›ì†Œ > ì¤‘ê°„ê°’|E[5, 10]
    C --> F[ê°’: 2]
    end
```

ì…ë ¥ë§ˆë‹¤ ë‘ í™ì˜ í¬ê¸°ë¥¼ ì¡°ì •í•˜ì—¬ ë°¸ëŸ°ìŠ¤ë¥¼ ìœ ì§€í•˜ë©´ `O(log n)`ì— ì¤‘ê°„ê°’ ê³„ì‚°ì´ ê°€ëŠ¥í•˜ë‹¤.

```python
import heapq

class MedianFinder:
    def __init__(self):
        self.low = []  # max heap (ìŒìˆ˜ë¡œ ì €ì¥)
        self.high = []  # min heap
        
    def add_num(self, num):
        # ì‚½ì… ìœ„ì¹˜ ê²°ì •
        if not self.low or num <= -self.low[0]:
            heapq.heappush(self.low, -num)
        else:
            heapq.heappush(self.high, num)
        
        # ë‘ í™ì˜ ë°¸ëŸ°ìŠ¤ ë§ì¶”ê¸°
        if len(self.low) > len(self.high) + 1:
            heapq.heappush(self.high, -heapq.heappop(self.low))
        elif len(self.high) > len(self.low):
            heapq.heappush(self.low, -heapq.heappop(self.high))
    
    def find_median(self):
        if len(self.low) > len(self.high):
            return -self.low[0]
        else:
            return (-self.low[0] + self.high[0]) / 2

# ì‚¬ìš© ì˜ˆì‹œ
finder = MedianFinder()
nums = [2, 1, 5, 7, 2, 0, 5]
medians = []

for num in nums:
    finder.add_num(num)
    medians.append(finder.find_median())
    
print(medians)  # ê° ë‹¨ê³„ì˜ ì¤‘ê°„ê°’ ì¶œë ¥
```

## í™ì˜ í™œìš© ì‚¬ë¡€ ğŸ”

### ë‹¤ìµìŠ¤íŠ¸ë¼ ì•Œê³ ë¦¬ì¦˜
- ìµœë‹¨ ê²½ë¡œ ì°¾ê¸°ì— ì‚¬ìš©
- í™ì„ ì‚¬ìš©í•˜ì—¬ ìµœì†Œ ê±°ë¦¬ë¥¼ ê°€ì§„ ë…¸ë“œ ë¹ ë¥´ê²Œ ì„ íƒ

### í—ˆí”„ë§Œ ì½”ë”©
- ë°ì´í„° ì••ì¶• ì•Œê³ ë¦¬ì¦˜
- ë¹ˆë„ìˆ˜ê°€ ë‚®ì€ ë¬¸ìë¶€í„° ì²˜ë¦¬ (ìµœì†Œ í™ í™œìš©)

## íŒŒì´ì¬ì˜ heapq ëª¨ë“ˆ í™œìš©í•˜ê¸° ğŸ

### ê¸°ë³¸ ì‚¬ìš©ë²•

```python
import heapq

# ë¹ˆ ë¦¬ìŠ¤íŠ¸ë¡œ ì‹œì‘
heap = []

# ìš”ì†Œ ì¶”ê°€
heapq.heappush(heap, 4)
heapq.heappush(heap, 1)
heapq.heappush(heap, 7)
heapq.heappush(heap, 3)

# ìµœì†Ÿê°’ í™•ì¸ (ì œê±° ì—†ì´)
print(heap[0])  # 1

# ìš”ì†Œë¥¼ ì œê±°í•˜ë©´ì„œ ë°˜í™˜
print(heapq.heappop(heap))  # 1
print(heapq.heappop(heap))  # 3

# ê¸°ì¡´ ë¦¬ìŠ¤íŠ¸ë¥¼ í™ìœ¼ë¡œ ë³€í™˜
numbers = [5, 8, 2, 4, 3]
heapq.heapify(numbers)
print(numbers)  # [2, 3, 5, 4, 8]
```

### ì‘ìš©: Kë²ˆì§¸ í° ìš”ì†Œ ì°¾ê¸°

```python
def find_kth_largest(nums, k):
    # k í¬ê¸°ì˜ ìµœì†Œ í™ ìœ ì§€
    min_heap = []
    for num in nums:
        if len(min_heap) < k:
            heapq.heappush(min_heap, num)
        elif num > min_heap[0]:
            heapq.heappop(min_heap)
            heapq.heappush(min_heap, num)
    
    return min_heap[0]  # kë²ˆì§¸ë¡œ í° ìš”ì†Œ

# ì˜ˆì‹œ
nums = [3, 2, 1, 5, 6, 4]
k = 2
print(f"{k}ë²ˆì§¸ í° ìš”ì†Œ: {find_kth_largest(nums, k)}")  # 5
```

## ìš”ì•½ ğŸ“

| êµ¬ë¶„ | ì„¤ëª… | ì‹œê°„ ë³µì¡ë„ |
|------|------|------------|
| ìš°ì„ ìˆœìœ„ í | ìš°ì„ ìˆœìœ„ ë†’ì€ ìš”ì†Œê°€ ë¨¼ì € ë‚˜ì˜¤ëŠ” ìë£Œêµ¬ì¡° | - |
| ë°°ì—´ êµ¬í˜„ | ë‹¨ìˆœí•˜ì§€ë§Œ íš¨ìœ¨ì„± ë‚®ìŒ | ì¶œë ¥: O(n) |
| í™ êµ¬í˜„ | ì™„ì „ ì´ì§„ íŠ¸ë¦¬ ê¸°ë°˜, íš¨ìœ¨ì  | ì‚½ì…/ì‚­ì œ: O(log n) |
| í™œìš©ì‚¬ë¡€ | ìŠ¤ì¼€ì¤„ë§, ê²½ë¡œ íƒìƒ‰, í—ˆí”„ë§Œ ì¸ì½”ë”© | - |

í™ì€ ìµœì†Œ/ìµœëŒ€ê°’ì„ ë¹ ë¥´ê²Œ ì–»ì„ ìˆ˜ ìˆëŠ” íš¨ìœ¨ì ì¸ ìë£Œêµ¬ì¡°ë¡œ,  
ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì²˜ë¦¬ê°€ í•„ìš”í•œ ì•Œê³ ë¦¬ì¦˜ì—ì„œ í•µì‹¬ì ì¸ ì—­í• ì„ í•©ë‹ˆë‹¤.
