# 2. LLM을 내 페어 프로그래머로 만들기: 코딩을 위한 프롬프트 엔지니어링

## 목차
- [1. 좋은 코드 생성을 위한 프롬프트의 4요소](#1-좋은-코드-생성을-위한-프롬프트의-4요소)
- [2. 작업 1: 코드 생성 (Code Generation)](#2-작업-1-코드-생성-code-generation)
  - [전략: 제약 조건을 명확히 하라](#전략-제약-조건을-명확히-하라)
- [3. 작업 2: 코드 리팩터링 (Code Refactoring)](#3-작업-2-코드-리팩터링-code-refactoring)
  - [전략: '무엇을'이 아닌 '왜'와 '어떻게'를 지시하라](#전략-무엇을이-아닌-왜와-어떻게를-지시하라)
- [4. 작업 3: 디버깅 및 오류 분석 (Debugging)](#4-작업-3-디버깅-및-오류-분석-debugging)
  - [전략: 충분한 맥락(Context)을 제공하라](#전략-충분한-맥락context을-제공하라)
- [5. 작업 4: 코드 변환 (Code Translation)](#5-작업-4-코드-변환-code-translation)
  - [전략: 라이브러리 버전과 스타일 가이드를 명시하라](#전략-라이브러리-버전과-스타일-가이드를-명시하라)

---

## 1. 좋은 코드 생성을 위한 프롬프트의 4요소

프로그래밍을 위한 프롬프트는 이전 챕터에서 배운 4요소(페르소나, 맥락, 작업, 형식)를 더 구체화하여 적용해야 합니다.

- **페르소나**: "당신은 파이썬 클린 코드 전문가입니다."
- **맥락**: "이 코드는 FastAPI 백엔드에서 사용될 예정이며, 데이터베이스는 PostgreSQL입니다."
- **작업**: "아래 파이썬 함수를, 예외 처리를 포함하여 더 안정적인 코드로 리팩터링해주세요."
- **형식**: "수정된 코드 전체를 코드 블록으로 보여주고, 변경된 부분에 대한 설명을 불렛 포인트로 요약해주세요."

## 2. 작업 1: 코드 생성 (Code Generation)

### 전략: 제약 조건을 명확히 하라

단순히 기능을 요청하는 것을 넘어, 코드에 적용되어야 할 구체적인 **제약 조건**을 명시해야 고품질의 코드를 얻을 수 있습니다.

- **나쁜 예**: `피보나치 함수를 만들어줘.`
- **좋은 예**:
    ```
    당신은 알고리즘 효율화 전문가입니다.
    파이썬으로 피보나치 수열을 계산하는 함수를 작성해주세요.

    [제약 조건]
    1. 반드시 동적 계획법(Dynamic Programming)의 메모이제이션(Memoization) 기법을 사용해야 합니다.
    2. n이 0보다 작을 경우, ValueError를 발생시켜야 합니다.
    3. 함수에는 타입 힌트(type hints)와 간단한 설명이 담긴 독스트링(docstring)을 포함해야 합니다.
    ```

## 3. 작업 2: 코드 리팩터링 (Code Refactoring)

### 전략: '무엇을'이 아닌 '왜'와 '어떻게'를 지시하라

단순히 "코드를 개선해줘"라고 요청하면, LLM은 자신의 기준에 따라 코드를 변경합니다. 내가 원하는 **개선 방향**과 **적용할 원칙**을 명확히 지시해야 합니다.

- **나쁜 예**: `이 코드 좀 더 좋게 만들어줘.`
- **좋은 예**:
    ```
    당신은 SOLID 원칙을 신봉하는 소프트웨어 아키텍트입니다.
    아래 코드는 하나의 클래스가 너무 많은 책임을 가지고 있어 SRP(단일 책임 원칙)를 위반하고 있습니다.

    [목표]
    이 클래스를 '데이터 처리', '데이터 검증', '데이터베이스 저장' 이라는 세 개의 책임으로 분리하여 리팩터링해주세요.

    [기존 코드]
    class DataManager:
        def process_and_save(self, data):
            # 데이터 처리 로직...
            # 데이터 검증 로직...
            # DB 저장 로직...
            pass
    ```

## 4. 작업 3: 디버깅 및 오류 분석 (Debugging)

### 전략: 충분한 맥락(Context)을 제공하라

LLM이 정확한 원인을 진단하려면, 문제 상황에 대한 충분한 정보가 필요합니다.

- **제공해야 할 정보**:
    1.  **전체 오류 메시지(Traceback)** : 가장 중요한 정보입니다.
    2.  **오류가 발생한 코드**와 그 주변 코드
    3.  **사용중인 라이브러리와 그 버전** (예: `pandas 1.5.3`, `python 3.10`)
    4.  **내가 시도해 본 것들**: "A와 B를 시도해봤는데, 여전히 같은 오류가 발생합니다."

- **나쁜 예**: `내 코드에서 에러가 나. 왜지?`
- **좋은 예**:
    ```
    Python 3.10과 pandas 1.5.3 환경에서 아래 코드를 실행했을 때,
    [전체 오류 메시지 붙여넣기]
    와 같은 `SettingWithCopyWarning`이 발생합니다.

    [코드]
    df[df['age'] > 30]['is_senior'] = True

    [질문]
    이 경고가 발생하는 이유와, `.loc`를 사용하여 이 경고를 해결하는 올바른 방법을 알려주세요.
    ```

## 5. 작업 4: 코드 변환 (Code Translation)

### 전략: 라이브러리 버전과 스타일 가이드를 명시하라

다른 언어나 라이브러리로 코드를 변환할 때, 목표 환경의 특성을 명확히 지정해주어야 호환성 문제를 줄일 수 있습니다.

- **나쁜 예**: `이 파이썬 코드를 자바스크립트로 바꿔줘.`
- **좋은 예**:
    ```
    아래의 Python 코드를, async/await를 사용하는 모던한 **ES6+** 스타일의 JavaScript 코드로 변환해주세요.
    Python의 `requests` 라이브러리는 JavaScript의 `axios` 라이브러리를 사용해서 대체해주세요.

    [Python 코드]
    import requests
    def get_user(user_id):
        response = requests.get(f"https://api.example.com/users/{user_id}")
        return response.json()
    ```